!function(){var t,e=document.createElement("pre"),i=document.createElement("canvas"),s=i.getContext("2d"),l={font:"Sans-serif",align:"left",color:"#000000",size:16,background:"rgba(0, 0, 0, 0)",stroke:0,strokeColor:"#FFFFFF",lineHeight:"1.2em",bold:!1,italic:!1};function o(t){t=String(t),e.innerText=t,e.setAttribute("style",this._style),document.body.append(e);var l=t.split("\n"),o=this.style.stroke,n=e.offsetHeight/l.length,h=.25*n;i.width=e.offsetWidth+2*o,i.height=e.offsetHeight,s.clearRect(0,0,i.width,i.height),s.fillStyle=this.style.background,s.beginPath(),s.fillRect(0,0,i.width,i.height),s.fill();var r="";switch(this.style.italic&&(r+="italic "),this.style.bold&&(r+="bold "),r+=this.style.size+"pt "+this.style.font,s.font=r,s.textAlign=this.style.align,s.lineWidth=this.style.stroke,s.strokeStyle=this.style.strokeColor,s.fillStyle=this.style.color,s.textAlign){case"center":o=i.width/2;break;case"right":o=i.width-o}l.forEach(function(t,e){this.style.stroke&&s.strokeText(t,o,n*(e+1)-h),s.fillText(t,o,n*(e+1)-h)}.bind(this)),document.body.removeChild(e)}window.TextImage=function(t){return this instanceof TextImage?(this.setStyle(t),this):new TextImage(t)},(t=window.TextImage.prototype).setStyle=function(t){for(var e in this.style=t||{},l)this.style[e]||(this.style[e]=l[e]);return this._style="font: ",this.style.italic&&(this._style+="italic "),this.style.bold&&(this._style+="bold "),this._style+=this.style.size+"pt "+this.style.font+";",this._style+="line-height:"+this.style.lineHeight+";",this._style+="text-align: "+this.style.align+";",this._style+="color: "+this.style.color+";",this._style+="background-color: "+this.style.background+";",this._style+=";padding: 0; display: block; position: fixed; top: 100%; overflow: hidden;",this},t.toDataURL=function(t){return t&&o.call(this,t),i.toDataURL()},t.toImage=function(t,e){o.call(this,t);var s=new Image;return e&&(s.onload=e),s.src=i.toDataURL(),s}}();
